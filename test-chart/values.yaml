global:
  host: show.apps.ci-ln-r8b821k-76ef8.aws-2.ci.openshift.org

backstage:
  upstream:
    commonLabels:
      backstage.io/kubernetes-id: janus-idp
    ingress:
      enabled: true
      tls:
        enabled: false
        secretName: janus-idp-cert
      host: show.apps.ci-ln-r8b821k-76ef8.aws-2.ci.openshift.org
    backstage:
      extraEnvVarsSecrets:
        - janus-idp
        - janus-idp-showcase-pguser-janus-idp
      extraVolumes:
        - name: ca-cert
          secret:
            secretName: janus-idp-showcase-cluster-cert
            items:
              - key: ca.crt
                path: ca.crt
      extraVolumeMounts:
        - name: ca-cert
          mountPath: "/mnt/certs"
      extraContainers:
        - name: oauth2-proxy
          envFrom:
            - secretRef:
                name: janus-idp
          ports:
            - name: oauth2-proxy
              containerPort: 4180
              protocol: TCP
          imagePullPolicy: IfNotPresent
          terminationMessagePolicy: File
          image: 'quay.io/oauth2-proxy/oauth2-proxy:latest'
          args:
            - '--provider=oidc'
            - '--email-domain=*'
            - '--upstream=http://localhost:7007'
            - '--http-address=0.0.0.0:4180'
            - '--skip-provider-button'
    postgresql:
      enabled: false
    service:
      ports:
        targetPort: oauth2-proxy
        backend: 4180
  route:
    enabled: false
    host: show.apps.ci-ln-r8b821k-76ef8.aws-2.ci.openshift.org
    tls:
      enabled: false

## Showcase
showcase:
  issuer: 
    email: pknight@redhat.com
  tls:
    dnsNames:
      - show.apps.ci-ln-r8b821k-76ef8.aws-2.ci.openshift.org

## Keycloak
keycloak:
  enabled: true

  host: key.apps.ci-ln-r8b821k-76ef8.aws-2.ci.openshift.org

  tls:
    enabled: false
    secretName: keycloak-idp-cert
    dnsNames:
      - key.apps.ci-ln-r8b821k-76ef8.aws-2.ci.openshift.org

  service:
    name: keycloak
    port: 8080

  replicas: 1

  image:
    repository: quay.io/keycloak/keycloak
    tag: 20.0.3

## Sonarqube
sonarqube:
  enabled: true

  host: son.apps.ci-ln-r8b821k-76ef8.aws-2.ci.openshift.org

  tls:
    enabled: false
    secretName: sonar-idp-cert
    dnsNames:
      - son.apps.ci-ln-r8b821k-76ef8.aws-2.ci.openshift.org

  service:
    name: sonarqube
    port: 9000
  
  replicas: 1

  imageStream:
    name: sonarqube:9.9-community
    tag: 9.9-community
